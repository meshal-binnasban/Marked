\documentclass[aspectratio=169,11pt]{beamer}
%how about we work on section and titles names. suggest a good way to organize the slides
% ====== Packages ======
\usepackage{amsmath,amssymb,amsthm}
\usepackage{booktabs,array,bm,graphicx}
\usepackage{tikz}
\usepackage{forest}
\input{macros}
\usepackage{pdfpc}


% ====== Title ======
\title{9-Month Progress Presentation}
\author{Meshal Binnasban}
\institute{King’s College London — Department of Informatics}
\date{\today}
\setbeameroption{hide notes}

\begin{document}

% ------------------ Title ------------------
\begin{frame}
  \titlepage

\end{frame}


\section{Introduction}
\subsection{Brzozowski’s Derivatives}
% ------------------ Brzozowski’s Derivatives ------------------
\begin{frame}{Brzozowski’s Derivative}
\small
\centering
\renewcommand{\arraystretch}{1.4}
\begin{tabular}{lcl}
  $\der_a(\ZERO)$ & $\Rightarrow$ & $\ZERO$ \\[2pt]
  $\der_a(\ONE)$  & $\Rightarrow$ & $\ZERO$ \\[2pt]
  $\der_a(c)$ & $\Rightarrow$ &
  $\begin{cases}
    \ONE  & \text{if } a = c,\\
    \ZERO & \text{otherwise.}
  \end{cases}$ \\[6pt]
  $\der_a(r_1 + r_2)$ & $\Rightarrow$ & $\der_a(r_1) + \der_a(r_2)$ \\[4pt]
  $\der_a(r_1 \cdot r_2)$ & $\Rightarrow$ &
  $\der_a(r_1) \cdot r_2 +
    \begin{cases}
      \der_a(r_2) & \text{if } \nullable(r_1),\\
      \ZERO       & \text{otherwise.}
    \end{cases}$ \\[6pt]
  $\der_a(r^\ast)$ & $\Rightarrow$ & $\der_a(r) \cdot r^\ast$\\
\end{tabular}
%\vspace{0.4em}\hrule\vspace{0.2em}
\mbox{}
\rule{\linewidth}{0.4pt}
\textit{Brzozowski’s derivatives}

\end{frame}

% ------------------ Derivatives Matching Example ------------------
\begin{frame}{Matching Example}
\small
\textbf{Regular expression } $(ab + ba)$ \medskip \textbf{String } \textit{ba}
\[
\begin{array}{rcl}
\der_b\, r
  &=& \der_b\, (ab + ba) \\
  &=& \der_b\, (ab) + \der_b\, (ba) \\
  &=& (\der_b\, a) \cdot b + (\der_b\, b) \cdot a \\
  &=& \ZERO \cdot b + \ONE \cdot a \\[6pt]
\der_a\, (\der_b\, r)
  &=& \der_a\, (\ZERO \cdot b + \ONE \cdot a)\\
  &=& \der_a\, (\ZERO \cdot b) + \der_a\, (\ONE \cdot a)\\
  &=& \der_a\, (\ZERO) \cdot b + (\der_a\, (\ONE) \cdot a + \der_a\, a)\\
  &=& \ZERO \cdot b + (\ZERO \cdot a + \ONE )
\end{array}
\]
\end{frame}

\subsection{Size Explosion}
% ------------------ Example to show Problem with Derivatives ------------------
\begin{frame}{Size Explosion}
\footnotesize
\begin{center}
    \scriptsize
  \textbf{Regular expression } $ ((a)^* + (aa)^* + (aaa)^* + (aaaa)^* + (aaaaa)^* )^*$  \textbf{String } \textit{$ \underbrace{a \dots a}_n$}
\[
    \begin{array}{rcl}
      \der_a\, r          & = &  \der_a\,( ((a)^{*} + (aa)^{*} + (aaa)^{*} + (aaaa)^{*} + (aaaaa)^{*} )^{*}) \\
                          & = & \der_a\, ((a)^{*} + (aa)^{*} + (aaa)^{*} + (aaaa)^{*} + (aaaaa)^{*} ) \cdot \, r^{*} \\  
                          & = & ((a)^{*} + (a \cdot (aa)^{*})+ ( aa \cdot (aaa)^{*}) + \dots ) \cdot  r^{*} \\\\
      \der_a\, (\der_a\, r) & = & \der_a\, ((a)^{*} + (a \cdot (aa)^{*})+( aa \cdot (aaa)^{*}) + \dots ) \cdot r^{*}  \\
                            &   & \quad +\, \der_a\,r^{*} \\
                            & = & ((a)^{*} + (aa)^{*} + ( a \cdot (aaa)^{*}) + \dots ) \cdot r^{*} \\
                            &   & \quad +\, ((a)^{*} + (a \cdot (aa)^{*})+ ( aa \cdot (aaa)^{*}) + \dots ) \cdot  r^{*} \\\\        
     \der_a\,( \der_a\, (\der_a\, r)) 
                            & =           & (\der_a\, (((a)^{*} + ((aa)^{*})+ ( a \cdot (aaa)^{*}) + \dots ) \cdot r^{*}) \\
                            &              &\quad \, +\, \der_a\, r^{*} )+ ( \der_a\,(((a)^{*} + (a \cdot (aa)^{*})+( aa \cdot (aaa)^{*}) \\
                            & & \quad +\,\dots ) \cdot  r^{*}) + \der_a\, r^{*})                     
            \end{array}
    \]
\end{center}
Without simplifications: $n=4 \Rightarrow 985$, $n=10 \Rightarrow 65{,}353$. \\
With simplifications: $n=4 \Rightarrow 315$, $n=10 \Rightarrow 777$.





\pdfpcnote{
no simplifications:  Original Size=35
i=1 , size= 100
i=2 , size= 226
i=3 , size= 479
i=4 , size= 985
i=5 , size= 2008
i=6 , size= 4053
i=7 , size= 8146
i=8 , size= 16312
i=9 , size= 32662
i=10 , size= 65353.

with aggressive simplifications:
Original Size=35
i=1 , size= 87
i=2 , size= 167
i=3 , size= 242
i=4 , size= 315
i=5 , size= 392
i=6 , size= 471
i=7 , size= 552
i=8 , size= 625
i=9 , size= 702
i=10 , size= 777. 

 the simplifications would also slow down the 
algorithm significantly as the input size increases and the exporessions to be 
simplified become larger.
}
\end{frame}

\section{Marked Approach: Fischer et al. / Asperti et al.}
\subsection{Fischer et al.’s Marked Approach}
% ------------------ Marks Approach: Fischer et al. with matching example ------------------
\begin{frame}{Marked Approach: Fischer et al. / Asperti et al.}
\footnotesize
\forestset{
  default preamble={for tree={
    draw,
    circle,
    minimum width=1em,  
    inner sep=0.2em,      
    align=left,
    s sep=1em,          
    l sep=1.5em           
  }}
}
\textbf{Regular expression } $a \cdot (b \cdot c)$ \textbf{ String } \textit{abc}

\vspace{0.6em}

\begin{columns}[c,onlytextwidth]
  % Tree 1
  \begin{column}{0.20\textwidth}
    \centering
    \begin{forest} baseline
      [$\cdot$
        [$a$]
        [$\cdot$ [$b$] [$c$]]
      ]
    \end{forest}
  \end{column}
  % Arrow a
  \begin{column}{0.05\textwidth}
    \Large $\xrightarrow{\;a\;}$
  \end{column}

  % Tree 2
  \begin{column}{0.20\textwidth}
    \centering
    \begin{forest} baseline
      [$\cdot$
        [$\Marked{a}$]
        [$\cdot$ [$b$] [$c$]]
      ]
    \end{forest}
  \end{column}

  % Arrow b
  \begin{column}{0.05\textwidth}
    \centering
    \Large $\xrightarrow{\;b\;}$
  \end{column}

  % Tree 3
  \begin{column}{0.20\textwidth}
    \centering
    \begin{forest} baseline
      [$\cdot$
        [$a$]
        [$\cdot$ [$\Marked{b}$] [$c$]]
      ]
    \end{forest}
  \end{column}

  % Arrow c
  \begin{column}{0.05\textwidth}
    \centering
   \Large $\xrightarrow{\;c\;}$
  \end{column}

  % Tree 4
  \begin{column}{0.20\textwidth}
    \centering
    \begin{forest} baseline
      [$\cdot$
        [$a$]
        [$\cdot$ [$b$] [$\Marked{c}$]]
      ]
    \end{forest}
  \end{column}
\end{columns}

\end{frame}

\subsection{\shifts\ Definition}
% ------------------ Definition of shifts ------------------
\begin{frame}{Our Definition of \shifts}
\small
\centering
\renewcommand{\arraystretch}{1.6}
\begin{tabular}{ccl}
$\shifts(ms, 0)$ & $\Rightarrow$ & $\emptylist$ \\
$\shifts(ms, 1)$ & $\Rightarrow$ & $\emptylist$ \\
$\shifts(ms, c)$ & $\Rightarrow$ & $[\, \Marked{s} \mid \Marked{c::s} \in ms \,]$ \\
$\shifts(ms, r_1 + r_2)$ & $\Rightarrow$ & $\shifts(ms, r_1) \; @ \; \shifts(ms, r_2)$ \\[2pt]
$\shifts(ms, r_1 \cdot r_2)$ & $\Rightarrow$ &
$\text{let } ms' = \shifts(ms, r_1) \text{ in}$ \\[2pt]
\multicolumn{3}{@{\hspace{10mm}}l}{
$\begin{cases}
\shifts(ms' @ ms, r_2) @ ms' & \text{if } \nullable(r_1) \land \nullable(r_2),\\
\shifts(ms' @ ms, r_2)       & \text{if } \nullable(r_1),\\
\shifts(ms', r_2) @ ms'      & \text{if } \nullable(r_2),\\
\shifts(ms', r_2)            & \text{otherwise.}
\end{cases}$}\\[2pt]
$\shifts(ms, r^{*})$ & $\Rightarrow$ & $\text{let } ms' = \shifts(ms, r) \text{ in}$\\
&&$\text{if } ms' = \emptylist \text{ then } \emptylist \text{ else } \shifts(ms', r^{*}) @ ms'$
\end{tabular}

\end{frame}

% ------------------ Worked example of \shifts ------------------
\begin{frame}{Matching Example}
\textbf{Regular expression } $(a + (a \cdot c))$ \medskip \textbf{String } \textit{ac}
\begin{enumerate}
   \item $\bigl|_{[\Marked{ac}]} \;( a + (a \cdot c) )$
   \item $(\bigl|_{[\Marked{ac}]} a) \;+\; (\bigl|_{[\Marked{ac}]} (a \cdot c))$
   \item $\bigl(a \;\bigl|_{[\Marked{c}]}\bigr) \;+\; \bigl((a \cdot c)\;\bigl|_{[\Marked_{\emptylist}]}\bigr)$\\
   $=$ $ [{}_{ {}_\Marked{c},{}_\Marked{\emptylist} }]$
\end{enumerate}
\end{frame}
% ------------------ Future Work ------------------
\begin{frame}{Future Work}
  \begin{itemize}
    \item \textbf{Extend the matcher.}  
    Add support for bounded repetitions, intersection, lookahead, and lookbehind operators.

    \item \textbf{POSIX value extraction.}  

    \item \textbf{Formalisation in Isabelle/HOL.}  

    \item \textbf{Exploring context-free generalisation.}  
   If time allows, we aim to extend the marked approach to context-free grammars, as done for derivatives.

  \end{itemize}

\end{frame}

\begin{frame}[allowframebreaks]{References}
  % Include every entry in urules.bib, cited or not:
  \nocite{Brzozowski1964,Owens2009,Might2011,Fischer2010,TanAndUrban2023,Asperti2010}
  \bibliographystyle{abbrv}
  \bibliography{urules}
\end{frame}

\end{document}
